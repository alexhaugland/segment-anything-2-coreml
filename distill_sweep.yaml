program: distill_moat_hiera.py
method: bayes
metric:
  name: loss
  goal: minimize
parameters:
  epochs:
    values: [5, 10, 15]
  batch_size:
    values: [2, 4, 8]
  lr:
    distribution: log_uniform
    min: 1e-5
    max: 1e-3
  moat_embed_dim:
    values: [32, 64, 128]
  moat_mlp_ratio:
    values: [3, 4, 5]
  moat_depths:
    values: [[2, 2, 2, 2], [3, 3, 3, 3], [4, 4, 4, 4]]
  moat_num_heads:
    values: [[1, 2, 4, 8], [2, 4, 8, 16]]
  moat_drop_path_rate:
    distribution: uniform
    min: 0.0
    max: 0.3
  optimizer:
    values: ['adam', 'adamw', 'sgd']
  weight_decay:
    distribution: log_uniform
    min: 1e-5
    max: 1e-2

command:
  - ${env}
  - ${interpreter}
  - ${program}
  - --epochs=${epochs}
  - --batch_size=${batch_size}
  - --lr=${lr}
  - --moat_embed_dim=${moat_embed_dim}
  - --moat_mlp_ratio=${moat_mlp_ratio}
  - --moat_depths=${moat_depths}
  - --moat_num_heads=${moat_num_heads}
  - --moat_drop_path_rate=${moat_drop_path_rate}
  - --optimizer=${optimizer}
  - --weight_decay=${weight_decay}